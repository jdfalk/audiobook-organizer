# file: .github/workflows/prerelease.yml
# version: 2.7.0
# guid: a1b2c3d4-e5f6-7a8b-9c0d-1e2f3a4b5c6d

name: Prerelease on Merge

on:
  push:
    branches: [main]
    paths-ignore:
      - '**.md'
      - 'docs/**'

concurrency:
  group: prerelease-${{ github.ref }}
  cancel-in-progress: false

permissions:
  contents: write
  packages: write
  id-token: write
  attestations: write

env:
  GHCOMMON_SCRIPTS_DIR: ${{ github.workspace }}/.github/workflows/scripts

jobs:
  prerelease:
    name: Create Prerelease Build
    uses: jdfalk/ghcommon/.github/workflows/reusable-release.yml@01f85f91f3d5eec5fc2d04771bf1704685d98eb8 # v1.10.3
    with:
      release-type: 'auto'
      prerelease: true
      draft: false
      go-enabled: true
      frontend-enabled: true
      docker-enabled: true
    secrets: inherit
